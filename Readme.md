## fan-build-server

> 为解决前端项目打包发布操作环境无法统一兼容、解决单一打包或需手动更改package.json来执行不同项目打包等条件而开发的一个前端构建平台
> 
> 主要用于管理前端项目数据，维护其基础信息及构建部署配置,（应用虚拟终端）执行命令行式构建及发布功能
> 

①构建后端服务：基于node+koa+mongodb

②构建前端服务：基于react+umi+antd

平台功能：

* 加入了本地各项目目录“增删改”管理
* 基础信息配置如站点名称、SVN资源等
* 构建及部署配置如：构建目录、构建执行命令、部署命令等
* 自定义配置一些用于打包信息的等

###目录结构
```
├── README.md
├── package.json

```


## 启动
1、启动服务端

```
$ npm run server:dev
```

2、启动客户端
```
$ npm run client:dev
```


3、启动数据库mongoDB


### 规划功能点

1. 【完成】①前端项目如何统一汇总（数据库管理）
2. 【完成】②项目中打包前端配置基础信息及如何指定(路由)模块打包
3. ③每个项目内的包如何统一管理
4. 【完成】④前端发出请求后KOA服务触发某些事件，如方案一”node命令行“操作（涉及安装包、打包、发布等），方案二【未执行】：考虑docker如何使用
5. docker方案整合前端client, 目录使用基础的webpack方式并与server使用同一层级的node_moudles，不在内部再安装包
6. 构建发布流程：①判断是否已安装包
7. 【完成】构建发布流程：②获取基础配置信息（可更改）
8. 构建发布流程：③执行打包并发布到SVN（或与jenkins进行交互）
9. 【完成】需要使用两个socket, 一个普通页面级别‘/page-socket'、一个命令行相关' terminal-socket’
10. 两端交互：如何保持已进行中的进行在项目切换还能识别（sockjs连接在刷新页面后被重置，可使用的方案是将日志保存至数据库中）
11. 【完成】需要有一个任务历史记录，记录执行任务的历史记录
12. 站点部署配置，需要考虑多个站点部署的情况，例如邑通项目
13. 项目根据当前执行的任务，判断其他状态是否可执行
14. 添加可执行终端控制（部分包缺失可指定安装）
15. 操作日志列表返回需要带分页
16. 构建成功后，是否支持下载包（服务端将文件夹转换成压缩包，客户端可点击对应成功日志的下载）
17. 进入任务页面，初始化设置控制台日志时，出现如果多页面打开 将会发送多个，造成异常

